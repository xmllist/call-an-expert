# =============================================================================
# Call-an-Expert Platform - Environment Configuration
# =============================================================================
# This file contains environment variables for ALL services in the monorepo
# Copy to .env for shared variables, or use service-specific env files
#
# Service-specific files:
#   - web/.env.local       - Next.js web application (copy from web/.env.local.example)
#   - server/.env          - Socket.io real-time server
#   - extension/           - Uses Vite env vars (VITE_*) at build time
#
# For detailed Next.js configuration, see: web/.env.local.example
# =============================================================================

# =============================================================================
# SUPABASE - Database & Authentication
# =============================================================================
# Start local Supabase: npx supabase start
# Get credentials: npx supabase status
# Dashboard: https://supabase.com/dashboard

# Supabase Project URL
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321

# Supabase Anonymous Key (safe for browser, protected by RLS)
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key_here

# Supabase Service Role Key - SERVER ONLY! NEVER EXPOSE TO CLIENT!
# Bypasses Row Level Security - use only for admin/webhook operations
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key_here

# =============================================================================
# STRIPE - Payments & Subscriptions
# =============================================================================
# Dashboard: https://dashboard.stripe.com
# Use test keys (pk_test_*, sk_test_*) for development

# Stripe Publishable Key (safe for browser)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_publishable_key_here

# Stripe Secret Key - SERVER ONLY! NEVER EXPOSE TO CLIENT!
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# Stripe Webhook Secret
# Local testing: stripe listen --forward-to localhost:3000/api/webhook/stripe
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# =============================================================================
# SOCKET.IO SERVER - Real-time Communication
# =============================================================================
# Used by: web app (client), socket server

# Socket.io Server URL (for web app client)
NEXT_PUBLIC_SOCKET_URL=http://localhost:3001

# Socket.io Server Port (for server process)
PORT=3001

# CORS Origin (defaults to NEXT_PUBLIC_APP_URL if not set)
CORS_ORIGIN=http://localhost:3000

# =============================================================================
# APPLICATION URLs
# =============================================================================

# Web Application URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# =============================================================================
# CHROME EXTENSION (Build-time variables)
# =============================================================================
# These are used during extension build via Vite
# Prefix with VITE_ for Vite to include them

# API URL for extension API calls
VITE_API_URL=http://localhost:3000

# =============================================================================
# OPTIONAL: Production Configuration
# =============================================================================
# Uncomment and configure these for production deployment

# Node Environment
# NODE_ENV=production

# WebRTC TURN Server (required for reliable production WebRTC)
# NEXT_PUBLIC_TURN_URL=turn:your-turn-server.com:3478
# NEXT_PUBLIC_TURN_USERNAME=your_turn_username
# NEXT_PUBLIC_TURN_CREDENTIAL=your_turn_credential

# =============================================================================
# LOCAL DEVELOPMENT QUICK START
# =============================================================================
# 1. Copy this file to .env
# 2. Start Supabase: npx supabase start
# 3. Copy Supabase credentials from `npx supabase status`
# 4. Create Stripe test account and copy API keys
# 5. Start services:
#    - Web:    cd web && npm run dev
#    - Server: cd server && npm run dev
#    - Stripe: stripe listen --forward-to localhost:3000/api/webhook/stripe
# 6. Build extension: cd extension && npm run build
#    Load unpacked from extension/dist in chrome://extensions
# =============================================================================
